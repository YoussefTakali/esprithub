<div class="repository-dashboard" *ngIf="repository && !loading && !error">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <button class="back-btn" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        Back to Repositories
      </button>
      <div class="repo-info">
        <i class="fas fa-folder folder-icon"></i>
        <span class="repo-label">Public repository</span>
        <h1 class="repo-path">{{ repository.owner?.login || 'salmabm' }}/{{ repository.name || 'test_git' }}</h1>
      </div>
    </div>
    <div class="header-right">
      <div class="header-actions">
        <button class="btn-add-file">
          <i class="fas fa-plus"></i>
          Add file
        </button>
        <button class="btn-code">
          <i class="fas fa-code"></i>
          Code
        </button>
      </div>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="tab-navigation">
    <div class="nav-tabs">
      <button class="nav-tab">
        <i class="fas fa-code"></i>
        Code
      </button>
      <button class="nav-tab">
        <i class="fas fa-chart-line"></i>
        Statistics
      </button>
    </div>
    <div class="branch-selector">
      <span>Branch:</span>
      <select class="branch-dropdown">
        <option>{{ repository.defaultBranch || 'main' }}</option>
      </select>
    </div>
  </div>

  <!-- Repository Dashboard -->
  <div class="repo-dashboard-content">
    <div class="dashboard-title">
      <h2>Repository Dashboard</h2>
      <span class="repo-path-subtitle">{{ repository.owner?.login || 'salmabm' }}/{{ repository.name || 'test_git' }}</span>
      <button class="refresh-btn" (click)="refreshData()">
        <i class="fas fa-sync-alt"></i>
        Refresh
      </button>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon total-commits">
          <span class="stat-number">{{ dashboardStats.totalCommits }}</span>
        </div>
        <div class="stat-label">TOTAL COMMITS (30 DAYS)</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon contributors">
          <span class="stat-number">{{ dashboardStats.contributors }}</span>
        </div>
        <div class="stat-label">CONTRIBUTORS</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon total-files">
          <span class="stat-number">{{ dashboardStats.totalFiles }}</span>
        </div>
        <div class="stat-label">TOTAL FILES</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon repository-size">
          <span class="stat-number">{{ dashboardStats.repositorySize }}</span>
        </div>
        <div class="stat-label">REPOSITORY SIZE</div>
      </div>
    </div>

    <!-- Activity Statistics -->
    <div class="activity-section">
      <div class="section-header">
        <h3>
          <i class="fas fa-chart-line"></i>
          Activity Statistics
        </h3>
        <div class="period-selector">
          <button 
            *ngFor="let period of activityPeriods" 
            class="period-btn"
            [class.active]="selectedActivityPeriod === period"
            (click)="onActivityPeriodChange(period)">
            {{ period }}
          </button>
        </div>
      </div>

      <div class="activity-stats">
        <div class="activity-stat">
          <span class="stat-label">Total Commits:</span>
          <span class="stat-value">{{ activityStats.totalCommits }}</span>
        </div>
        <div class="activity-stat">
          <span class="stat-label">Lines Added:</span>
          <span class="stat-value added">+{{ activityStats.linesAdded }}</span>
        </div>
        <div class="activity-stat">
          <span class="stat-label">Lines Deleted:</span>
          <span class="stat-value deleted">-{{ activityStats.linesDeleted }}</span>
        </div>
      </div>

      <!-- Daily Activity Chart -->
      <div class="daily-activity">
        <h4>Daily Activity</h4>
        <div class="activity-chart">
          <div class="chart-container">
            <div class="chart-bar">
              <div class="bar-line"></div>
              <div class="activity-point active" style="left: 90%;">
                <div class="point-value">1</div>
              </div>
            </div>
            <div class="chart-labels">
              <span class="chart-label">Jul/01</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- File Types Distribution -->
    <div class="file-types-section">
      <h3>
        <i class="fas fa-folder"></i>
        File Types Distribution
      </h3>
      <div class="file-types-chart">
        <div class="file-type-item" *ngFor="let fileType of fileTypes">
          <div class="file-type-color" [style.background-color]="fileType.color"></div>
          <span class="file-type-name">{{ fileType.type }}</span>
          <span class="file-type-percentage">{{ fileType.percentage }}%</span>
          <div class="file-type-bar">
            <div class="file-type-fill" 
                 [style.width.%]="fileType.percentage" 
                 [style.background-color]="fileType.color">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="loading-state">
  <div class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i>
  </div>
  <p>Loading repository details...</p>
</div>

<!-- Error State -->
<div *ngIf="error && !loading" class="error-state">
  <div class="error-icon">
    <i class="fas fa-exclamation-triangle"></i>
  </div>
  <h3>Error Loading Repository</h3>
  <p>{{ error }}</p>
  <button class="btn-retry" (click)="goBack()">Go Back</button>
</div>
